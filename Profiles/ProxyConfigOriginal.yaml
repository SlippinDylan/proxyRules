# æœºåœºè®¢é˜…
proxy-providers:
  Pander:
    url: "æœºåœºè®¢é˜…"   # clash è®¢é˜…é“¾æ¥
    type: http    # ä»ç½‘ä¸Šè·å–è®¢é˜…
    interval: 86400   # æ›´æ–°æ—¶é—´
    health-check:   # è‡ªåŠ¨æ£€æµ‹è®¢é˜…çš„æ—¶é—´
      enable: true
      url: https://www.gstatic.com/generate_204   # è‡ªåŠ¨æµ‹å»¶æ—¶çš„åœ°å€
      interval: 300   # è‡ªåŠ¨æµ‹å»¶æ—¶çš„æ—¶é—´ ç§’
    proxy: ç›´è¿   # æ‹‰å–è®¢é˜…é“¾æ¥æ˜¯ç”¨ ç›´è¿ è¿˜æ˜¯ ä»£ç†
    header:   # è¯·æ±‚å¤´,è¯·æ±‚å¤´é»˜è®¤æ˜¯clash.metaï¼Œåœ¨æœºåœºå¯ä»¥æ­£å¸¸æ‹‰å–çš„æ—¶å€™å¯ä»¥ä¸ç”¨å®šä¹‰
      User-Agent:
      - "Clash"
      - "mihomo"
      - "Clash.meta"
    override:   # é¢å¤–å‚æ•°
      udp: true   # å¼€å¯ UDP
      # down: "50 Mbps"
      # up: "10 Mbps"
      skip-cert-verify: true  # è·³è¿‡è¯ä¹¦éªŒè¯

# èŠ‚ç‚¹ä¿¡æ¯
proxies:
  - {name: ç›´è¿, type: direct, udp: true}

# å…¨å±€é…ç½® 
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true  # å…è®¸å±€åŸŸç½‘
bind-address: "*"   # ç»‘å®šIP é»˜è®¤æ˜¯æ‰€æœ‰
ipv6: false   # IPV6çš„æ€»å¼€å…³
unified-delay: true  # ç»Ÿä¸€å»¶è¿Ÿ
tcp-concurrent: true   # TCP å¹¶å‘
log-level: warning    # æ—¥å¿—çš„ç­‰çº§
mode: rule   # ä»£ç†æ¨¡å¼ è§„åˆ™
find-process-mode: 'off'    # è¿›ç¨‹çš„åŒ¹é…
# interface-name: en0   # ç»‘å®šç½‘å¡ ä¸éœ€è¦è®¾ç½®
global-client-fingerprint: chrome   # å…¨å±€çš„æŒ‡çº¹  ä¼ªè£…æˆæµè§ˆå™¨çš„æŒ‡çº¹
keep-alive-idle: 600    # ç§»åŠ¨è®¾å¤‡çœç”µ
keep-alive-interval: 15   # ç§»åŠ¨è®¾å¤‡çœç”µ
disable-keep-alive: false   # å…³é—­ç§»åŠ¨è®¾å¤‡çœç”µ
profile:
  store-selected: true    # èŠ‚ç‚¹ç¼“å­˜
  store-fake-ip: true   # fake-ip çš„ç¼“å­˜

# æ•°æ®åº“
# geodata-loader: memconservative/standard    # æ•°æ®åº“ç±»å‹  å°å†…å­˜/æ ‡å‡†å†…å­˜
# geodata-mode: true/false    # GEOIP æ•°æ®åº“æ¨¡å¼ tureæ˜¯groip  falseåˆ™æ˜¯mmdb
# geo-auto-update: false    # æ˜¯å¦å¼€å¯è‡ªåŠ¨æ›´æ–°
# geo-update-interval: 24   # è‡ªåŠ¨æ›´æ–°æ—¶é—´ å•ä½å°æ—¶
# geox-url:   # æ¯ä¸ªæ•°æ®åº“çš„ä¸‹è½½é“¾æ¥  æ²¡æœ‰å¿…è¦  å†…æ ¸å‚æ•°æœ‰ï¼Œæ— éœ€å®šä¹‰
#   groip: ""
#   geosite: ""
#   mmdb: ""
#   asn: ""

# æ§åˆ¶é¢æ¿
external-controller: 0.0.0.0:9090   # æ§åˆ¶é¢æ¿åœ°å€
secret: "dylan1010"   # æ§åˆ¶é¢æ¿ç™»å½•åœ°å€
external-ui: "/etc/mihomo/run/ui"   # æ§åˆ¶é¢æ¿çš„è·¯å¾„
external-ui-name: zashboard   # æ§åˆ¶é¢æ¿è·¯å¾„çš„æ–‡ä»¶å¤¹
external-ui-url: "https://github.com/Zephyruso/zashboard/archive/refs/heads/gh-pages.zip"   # æ§åˆ¶é¢æ¿çš„ä¸‹è½½åœ°å€

# å—…æ¢  ä½œç”¨ä¸æ˜¯å¾ˆå¤§ åœ¨è·¯ç”±è§„åˆ™åŒ¹é…çš„æ—¶å€™ å¦‚æœæ˜¯IP é€šè¿‡å—…æ¢åŒ¹é…å‡ºå¯¹åº” IP çš„åŸŸå
sniffer:
  enable: true    # å¼€å¯å—…æ¢
  sniff:    # å—…æ¢çš„ç±»å‹ 
    # HTTP TLS QUIC å—…æ¢çš„ç«¯å£
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:   # å¼ºåˆ¶å—…æ¢
    - "+.v2ex.com"
  skip-domain:    # å¿½ç•¥å—…æ¢
    - "rule-set:private_domain,cn_domain"
    - "dlg.io.mi.com"
    - "+.push.apple.com"
    - "+.apple.com"
    - "+.wechat.com"
    - "+.qpic.cn"
    - "+.qq.com"
    - "+.wechatapp.com"
    - "+.vivox.com"
    - "+.oray.com"
    - "+.sunlogin.net"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"

# å…¥ç«™  ç”¨ openclash å’Œ nikki æ²¡ç”¨
# tun:
#   enable: true    # tun æ¨¡å¼ å¼€å¯
#   stack: mixed    # TUN æ¨¡å¼çš„åè®®æ ˆ mixed(æ··åˆï¼Œé»˜è®¤é€‰è¿™ä¸ª) system(ç³»ç»Ÿï¼Œå‡ºç°å…¼å®¹æ€§é—®é¢˜é€‰è¿™ä¸ª) gvisor  
#   dns-hijack: ["any:53", "tcp://any:53"]    # åŠ«æŒçš„ç«¯å£ 53 æ˜¯ dns çš„
#   auto-route: true    # è‡ªåŠ¨è·¯ç”±
#   auto-redirect: true   # è‡ªåŠ¨é‡å®šå‘
#   auto-detect-interface: true   # è‡ªåŠ¨æ¥å£é€‰æ‹©

# DNSæ¨¡å—
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false   # æ˜¯å¦è§£æ IPV6 åœ°å€
  respect-rules: true   # æ˜¯å¦éµå¾ªè·¯ç”±è§„åˆ™  è‹¥è§„åˆ™åŒ¹é…ä¸­æœ‰å›½å†…å¤–çš„æœåŠ¡å™¨ï¼Œåˆ™ä¼šè‡ªåŠ¨æŒ‰ç…§nameserver-policy ä¸­çš„"rule-set:private_domain,cn_domain"ä»¥åŠ"rule-set:gfw_domain,geolocation-Icn"èµ°å¯¹åº”é…ç½®çš„ dns æœåŠ¡å™¨ï¼Œæ˜¯å¦ç›´è¿è‡³æŒ‡æœ¬æœºä¸ dns æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: blacklist    # fake-ip è¿‡æ»¤åˆ—è¡¨çš„æ¨¡å¼ é»‘åå•æ¨¡å¼ åªè¦åœ¨ä¸‹æ–¹fake-ip-filterä¸­æ·»åŠ å¯¹åº”çš„åœ°å€ï¼Œå¯¹åº”åœ°å€å°±ä¼šå˜æˆ Redir host æ¨¡å¼
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"   # è§„åˆ™é›†
    - "+.services.googleapis.cn"
    - "+.xn--ngstr-lra8j.com"
    - "+.ntp.tencent.com"
    - "+.ntp1.aliyun.com"
    - "time.*.com"    # æ—¶é—´æœåŠ¡å™¨
    - "+.ntp.ntsc.ac.cn"
    - "+.pool.ntp.org"
    - "+.cn.ntp.org.cn"
  default-nameserver:   # é»˜è®¤çš„ dns æœåŠ¡å™¨ï¼Œä½œç”¨ï¼šä¸‹æ–¹çš„ dns æœåŠ¡å™¨ç”¨äº†åŸŸååï¼Œéœ€è¦é€šè¿‡æ­¤å¤„çš„æœåŠ¡å™¨è¿›è¡Œåè®®åŸŸåçš„ dns æœåŠ¡å™¨
    - 221.5.203.98
    - 223.5.5.5
#  direct-nameserver:    # ç›´è¿è§„åˆ™çš„ dns æœåŠ¡å™¨ï¼Œå®šä¹‰ç›´è¿çš„è§„åˆ™éƒ½ä¼šèµ°è¿™ä¸ªï¼Œåªèƒ½åœ¨direct-nameserver-follow-policy: falseçš„æƒ…å†µä¸‹æ˜¯ç”¨ï¼Œè‹¥ä¸º ture åˆ™ä¼šä¼˜å…ˆèµ°nameserver-policyä¸­çš„å†…å®¹
#    - 221.5.203.98
#    - 223.5.5.5
#  direct-nameserver-follow-policy: false
  proxy-server-nameserver:    # ä¸Šæ–¹â€œèŠ‚ç‚¹ä¿¡æ¯â€çš„æœåŠ¡å™¨çš„dnsï¼Œå¯¹å…¶ä»–åŒºåŸŸæ²¡æœ‰ä»»ä½•å½±å“ï¼Œè®¾ç½®å›½å†…çš„ dns å³å¯
    - 221.5.203.98
    - 223.5.5.5
    - 119.29.29.29
#  nameserver-policy:  # dnsçš„åŒ¹é…è§„åˆ™
#    '+.baidu.com': '114.114.114.114'    # è®¿é—®ç™¾åº¦ç”¨æŒ‡å®šçš„ dns æœåŠ¡å™¨
#    "rule-set:private_domain,cn_domain":    # æŒ‡å®šè§„åˆ™é›†ç”¨æŒ‡å®šçš„ DNS æœåŠ¡å™¨
#      - 223.5.5.5
#      - 119.29.29.29
#    "rule-set:gfw_domain,geolocation-!cn":
#      - tls://8.8.4.4#é»˜è®¤ä»£ç†
#      - tls://1.1.1.1#é»˜è®¤ä»£ç†&h3=true
  nameserver:   # ä¸»è¦çš„ DNS æœåŠ¡å™¨ï¼Œå°½é‡ç”¨è¿è¥å•†æä¾›çš„DNS
    - 221.5.203.98
    - 223.5.5.5
    - 119.29.29.29
 
# å‡ºç«™ç­–ç•¥
# æ³¨æ„é”šç‚¹å¿…é¡»æ”¾åœ¨å¼•ç”¨çš„ä¸Šæ–¹ï¼Œå¯ä»¥é›†ä¸­æŠŠé”šç‚¹å…¨éƒ¨æ”¾yamlçš„é¡¶éƒ¨ã€‚
# type:é€‰æ‹©èŠ‚ç‚¹çš„ç±»å‹ï¼›include-all:åŒ…å«æ‰€æœ‰çš„æœºåœºçš„è®¢é˜…é“¾æ¥ï¼ˆuse:æœºåœºåï¼‰;tolerance:, interval:æµ‹é€Ÿçš„é—´éš”
pr: &pr {type: select, proxies: [ğŸš€ é»˜è®¤ä»£ç†, ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿]}
proxy-groups:
  - {name: ğŸš€ é»˜è®¤ä»£ç†, type: select, proxies: [ğŸ”¯ é¦™æ¸¯æ•…è½¬, ğŸ”¯ æ—¥æœ¬æ•…è½¬, â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, â™»ï¸ ç¾å›½è‡ªåŠ¨, â™»ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, ç›´è¿]}
  - {name: ğŸ“¹ YouTube, <<: *pr}
  - {name: ğŸ€ Google, <<: *pr}
  - {name: ğŸ¤– ChatGPT, <<: *pr}
  - {name: ğŸ‘¨ğŸ¿â€ğŸ’» GitHub, <<: *pr}
  - {name: ğŸ¬ OneDrive, <<: *pr}
  - {name: ğŸªŸ Microsoft, <<: *pr}
  - {name: ğŸµ TikTok, <<: *pr}
  - {name: ğŸ“² Telegram, <<: *pr}
  - {name: ğŸ¥ NETFLIX, <<: *pr}
  - {name: âœˆï¸ Speedtest, <<: *pr}
  - {name: ğŸ’¶ PayPal, <<: *pr}
  - {name: ğŸ Apple, type: select, proxies: [ç›´è¿, ğŸš€ é»˜è®¤ä»£ç†]}
  - {name: ğŸ¯ ç›´è¿, type: select, proxies: [ç›´è¿, ğŸš€ é»˜è®¤ä»£ç†]}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼, <<: *pr}

  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ¸¯|hk|hongkong|hong kong"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)æ—¥|jp|japan"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, type: select, include-all: true, filter: "(?i)ç¾|us|unitedstates|united states"}
  - {name: ğŸ”¯ é¦™æ¸¯æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"}
  - {name: ğŸ”¯ æ—¥æœ¬æ•…è½¬, type: fallback, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$" }
  - {name: â™»ï¸ é¦™æ¸¯è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|æ·±|ç¾)).)*$"}
  - {name: â™»ï¸ æ—¥æœ¬è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$" }
  - {name: â™»ï¸ ç¾å›½è‡ªåŠ¨, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "(?=.*(ç¾|US|(?i)States|America))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$"}
  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, type: url-test, include-all: true, tolerance: 20, interval: 300, filter: "^((?!(ç›´è¿)).)*$"}
  - {name: ğŸŒ å…¨éƒ¨èŠ‚ç‚¹, type: select, include-all: true}

# è§„åˆ™åŒ¹é… æ­¤è§„åˆ™éƒ¨åˆ†æ²¡æœ‰åšé˜²æ³„éœ²å¤„ç†ï¼Œå› ä¸ºå¼Šä¸¥é‡å¤§äºåˆ©ï¼æ³¨æ„é¡ºåº
rules:
  - RULE-SET,private_domain,ç›´è¿
  - RULE-SET,apple_domain,ğŸ Apple
  - RULE-SET,proxylite,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,ai,ğŸ¤– ChatGPT
  - RULE-SET,github_domain,ğŸ‘¨ğŸ¿â€ğŸ’» GitHub
  - RULE-SET,youtube_domain,ğŸ“¹ YouTube
  - RULE-SET,google_domain,ğŸ€ Google
  - RULE-SET,onedrive_domain,ğŸ¬ OneDrive
  - RULE-SET,microsoft_domain,ğŸªŸ Microsoft
  - RULE-SET,tiktok_domain,ğŸµ TikTok
  - RULE-SET,speedtest_domain,âœˆï¸ Speedtest
  - RULE-SET,telegram_domain,ğŸ“² Telegram
  - RULE-SET,netflix_domain,ğŸ¥ NETFLIX
  - RULE-SET,paypal_domain,ğŸ’¶ PayPal
  - RULE-SET,gfw_domain,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,geolocation-!cn,ğŸš€ é»˜è®¤ä»£ç†
  - RULE-SET,cn_domain,ğŸ¯ ç›´è¿
  - RULE-SET,google_ip,ğŸ€ Google,no-resolve
  - RULE-SET,netflix_ip,ğŸ¥ NETFLIX,no-resolve
  - RULE-SET,telegram_ip,ğŸ“² Telegram,no-resolve
  - RULE-SET,cn_ip,ğŸ¯ ç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

#  - DOMAIN-SUFFIX,qichiyu.com,ğŸš€ é»˜è®¤ä»£ç†    # ä¸´æ—¶æ·»åŠ è§„åˆ™


# è§„åˆ™é›†
rule-anchor:    # è§„åˆ™é›†çš„é”šç‚¹
  # é”šç‚¹åå­—ï¼š&é”šç‚¹åå­—{type:å®šä¹‰ä»å“ªé‡Œè·å–(httpæ˜¯ç½‘ä¸Š,flieæ˜¯æœ¬åœ°), interval:æ›´æ–°æ—¶é—´, behavior:è§„åˆ™é›†å†…å®¹æ˜¯ä»€ä¹ˆæ ¼å¼çš„(è§„åˆ™é›†ä¸­æ˜¯IP(ipcidr)è¿˜æ˜¯åŸŸå(domain)è¿˜æ˜¯è€æ ¼å¼(classical)),format:å®šä¹‰æ–‡ä»¶æ˜¯ä»€ä¹ˆæ ¼å¼}
  domain: &domain {type: http, interval: 86400, behavior: domain, format: mrs}
  class: &class {type: http, interval: 86400, behavior: classical, format: text}
  ip: &ip {type: http, interval: 86400, behavior: ipcidr, format: mrs}
rule-providers:     # è§„åˆ™é›†çš„ä¸»å‚æ•°
  
  private_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs"}
  proxylite: { <<: *class, url: "https://raw.githubusercontent.com/qichiyuhub/rule/refs/heads/master/ProxyLite.list"}
  ai: {  <<: *domain, url: "https://github.com/MetaCubeX/meta-rules-dat/raw/refs/heads/meta/geo/geosite/category-ai-chat-!cn.mrs" }
  youtube_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs"}
  google_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs"}
  github_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs"}
  telegram_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs"}
  netflix_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs"}
  paypal_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.mrs"}
  onedrive_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.mrs"}
  microsoft_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.mrs"}
  apple_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.mrs"}
  speedtest_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.mrs"}
  tiktok_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs"}
  gfw_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.mrs"}
  geolocation-!cn: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.mrs"}
  cn_domain: { <<: *domain, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs"}
  
  cn_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs"}
  google_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs"}
  telegram_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs"}
  netflix_ip: { <<: *ip, url: "https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs"}